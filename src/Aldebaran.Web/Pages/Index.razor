@page "/"@attribute [Authorize]<PageTitle>Index</PageTitle>@inject Microsoft.Extensions.Localization.IStringLocalizer<Index> L@using Aldebaran.Web.Models.ViewModels;@using Aldebaran.Web.Resources.LocalizedControls;@inject Aldebaran.Web.Resources.ISharedStringLocalizer SharedLocalizer<RadzenText Text="Consulta de notificaciones activas" TextStyle="Radzen.Blazor.TextStyle.DisplayH5" TagName="Radzen.Blazor.TagName.Auto"></RadzenText><RadzenSplitter Resize="@OnResize" Orientation="Orientation.Vertical" style="height: 700px; border: 2px solid rgba(0,0,0,.08);">    <RadzenSplitterPane Size="50%" Min="20%" Max="80%">        <RadzenSplitter Orientation="Orientation.Horizontal">            <RadzenSplitterPane Size="50%" Min="20%" Max="80%">                <RadzenCard>                    <RadzenLabel Text="Cantidades mínimas" TextStyle="Radzen.Blazor.TextStyle.H6" TagName="Radzen.Blazor.TagName.Auto"></RadzenLabel>                    <LocalizedDataGrid PageSize="@pageSize" @ref="minimumQuantityArticlesGrid" AllowFiltering="true" AllowPaging="true" AllowSorting="true" ShowPagingSummary="true" Data="@minimumQuantityArticles" TItem="MinimumQuantityArticle">                        <Columns>                            <RadzenDataGridColumn TItem="MinimumQuantityArticle" Property="ArticleName" Title="Bodega" Width="80%" />                            <RadzenDataGridColumn TItem="MinimumQuantityArticle" Property="MinimumQuantity" Title="Cant. Mínima" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="MinimumQuantityArticle" Property="AvailableQuantity" Title="Inventario" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="MinimumQuantityArticle" Property="InTransitQuantity" Title="En Transito" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="MinimumQuantityArticle" Property="ReservedQuantity" Title="Reservado" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="MinimumQuantityArticle" Property="OrderedQuantity" Title="Pedido" Width="30%" Filterable="false" />                        </Columns>                    </LocalizedDataGrid>                </RadzenCard>            </RadzenSplitterPane>            <RadzenSplitterPane>                <RadzenCard>                    <RadzenLabel Text="Articulos sin disponible" TextStyle="Radzen.Blazor.TextStyle.H6" TagName="Radzen.Blazor.TagName.Auto"></RadzenLabel>                    <LocalizedDataGrid Style="height: 100%" PageSize="@pageSize" @ref="outOfStockArticlesGrid" AllowFiltering="true" AllowPaging="true" AllowSorting="true" ShowPagingSummary="true" Data="@outOfStockArticles" TItem="OutOfStockArticle">                        <Columns>                            <RadzenDataGridColumn TItem="OutOfStockArticle" Property="ArticleName" Title="Bodega" Width="80%" />                            <RadzenDataGridColumn TItem="OutOfStockArticle" Property="AvailableQuantity" Title="Inventario" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="OutOfStockArticle" Property="InTransitQuantity" Title="En Transito" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="OutOfStockArticle" Property="ReservedQuantity" Title="Reservado" Width="30%" Filterable="false" />                            <RadzenDataGridColumn TItem="OutOfStockArticle" Property="OrderedQuantity" Title="Pedido" Width="30%" Filterable="false" />                        </Columns>                    </LocalizedDataGrid>                </RadzenCard>            </RadzenSplitterPane>        </RadzenSplitter>    </RadzenSplitterPane>    <RadzenSplitterPane Size="50%" Min="20%" Max="80%">        <RadzenSplitter Orientation="Orientation.Horizontal">            <RadzenSplitterPane Size="50%" Min="20%" Max="80%">                <RadzenCard>                    <RadzenLabel Text="Reservas Vencidas" TextStyle="Radzen.Blazor.TextStyle.H6" TagName="Radzen.Blazor.TagName.Auto"></RadzenLabel>                    <LocalizedDataGrid Style="height: 100%" PageSize="@pageSize" @ref="expiredReservationsGrid" AllowFiltering="true" AllowPaging="true" AllowSorting="true" ShowPagingSummary="true" Data="@expiredReservations" TItem="Aldebaran.Application.Services.Models.CustomerReservation">                        <Columns>                            <RadzenDataGridColumn TItem="Aldebaran.Application.Services.Models.CustomerReservation" Property="ReservationNumber" Title="No. reserva" Width="40%"></RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Aldebaran.Application.Services.Models.CustomerReservation" Property="Customer.CustomerName" Title="Cliente" Width="80%"></RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Aldebaran.Application.Services.Models.CustomerReservation" Property="ReservationDate" Title="Fecha reserva" Width="50%">                                <Template Context="customerReservation">                                    <span>@customerReservation.ReservationDate.ToString(SharedLocalizer["date:format"])</span>                                </Template>                            </RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Aldebaran.Application.Services.Models.CustomerReservation" Property="ExpirationDate" Title="Fecha expiración" Width="50%">                                <Template Context="customerReservation">                                    <span>@customerReservation.ExpirationDate.ToString(SharedLocalizer["date:format"])</span>                                </Template>                            </RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Aldebaran.Application.Services.Models.CustomerReservation" Filterable="false" Sortable="false" Width="50px" TextAlign="TextAlign.Center" Pickable="false" Reorderable="false" Resizable="false">                                <Template Context="customerReservation">                                    <RadzenButton Icon="document_scanner" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat" Size="ButtonSize.Medium" Click="@(args => OpenCustomerReservation(customerReservation))" @onclick:stopPropagation="true" MouseEnter="@(args => ShowTooltip(args,"Consultar reserva", new TooltipOptions(){ Position = TooltipPosition.Left }))">                                    </RadzenButton>                                </Template>                            </RadzenDataGridColumn>                        </Columns>                    </LocalizedDataGrid>                </RadzenCard>            </RadzenSplitterPane>            <RadzenSplitterPane>                <RadzenCard>                    <RadzenLabel Text="Alarmas del día" TextStyle="Radzen.Blazor.TextStyle.H6" TagName="Radzen.Blazor.TagName.Auto"></RadzenLabel>                    <LocalizedDataGrid Style="height: 100%" PageSize="@pageSize" @ref="alarmsGrid" AllowFiltering="true" AllowPaging="true" AllowSorting="true" ShowPagingSummary="true" Data="@alarms" TItem="Alarm">                        <Columns>                            <RadzenDataGridColumn TItem="Alarm" Title="Documento" Width="80%">                                <Template Context="alarm">                                    <RadzenLabel>                                        @alarm.DocumentTypeName Nro. @alarm.DocumentNumber                                    </RadzenLabel>                                </Template>                            </RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Alarm" Property="CreationDate" Title="Fecha creación" Width="50%">                                <Template Context="alarm">                                    <span>@alarm.CreationDate.ToString(SharedLocalizer["date:format"])</span>                                </Template>                            </RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Alarm" Property="ExecutionDate" Title="Fecha activación" Width="50%">                                <Template Context="alarm">                                    <span>@alarm.ExecutionDate.ToString(SharedLocalizer["date:format"])</span>                                </Template>                            </RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Alarm" Property="AlarmMessage" Title="Mensaje" Width="80%"></RadzenDataGridColumn>                            <RadzenDataGridColumn TItem="Alarm" Filterable="false" Sortable="false" Width="50px" TextAlign="TextAlign.Center" Pickable="false" Reorderable="false" Resizable="false">                                <Template Context="alarm">                                    <RadzenButton Icon="assignment_turned_in" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat" Size="ButtonSize.Medium" Click="@(args => DisableAlarm(alarm))" @onclick:stopPropagation="true" MouseEnter="@(args => ShowTooltip(args,"Marcar alarma como leída", new TooltipOptions(){ Position = TooltipPosition.Left }))">                                    </RadzenButton>                                </Template>                            </RadzenDataGridColumn>                        </Columns>                    </LocalizedDataGrid>                </RadzenCard>            </RadzenSplitterPane>        </RadzenSplitter>    </RadzenSplitterPane></RadzenSplitter>