@page "/"
@attribute [Authorize]
@using Aldebaran.Web.Models.ViewModels;
@using Aldebaran.Web.Resources.LocalizedControls;
@using Aldebaran.Web.Pages.DashboardNotificationComponents;
@inject Aldebaran.Infraestructure.Common.Utils.ISharedStringLocalizer SharedLocalizer ;

<PageTitle>Notificaciones</PageTitle>
<LoadingData IsLoadingData="@isLoadingInProgress" />

@if (!isLoadingInProgress)
{
    
    <RadzenRow class="mb-2">
        <RadzenColumn SizeLG="6" SizeXL="6" SizeMD="6" SizeSM="6" SizeXX="12" SizeXS="12" class="d-flex align-items-end">
            <RadzenText Text="Tablero de notificaciones" TextStyle="Radzen.Blazor.TextStyle.DisplayH5" TagName="Radzen.Blazor.TagName.Auto" class="p-0 m-0"></RadzenText>
        </RadzenColumn>
        <RadzenColumn SizeLG="6" SizeXL="6" SizeMD="6" SizeSM="6" SizeXX="12" SizeXS="12">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.End" Gap="1rem" Wrap="FlexWrap.Wrap" JustifyContent="JustifyContent.End">
                <RadzenFormField Variant="Variant.Text">
                    <RadzenDropDown @bind-Value="@GridTimer.SelectedTimer" Data="@Timers" ValueProperty="Milliseconds" TextProperty="Description" Name="MinimumQuantityDropDownTimer" Change="@((args)=>GridaData_UpdateOnTimerChange(args))" />
                </RadzenFormField>
                <RadzenButton Click="@GridData_Update" Icon="refresh" Variant="Variant.Filled" ButtonStyle="ButtonStyle.Primary" Size="ButtonSize.Medium" class="d-flex align-items-end rz-button-icon-only rz-border-radius-10" />
            </RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.End" Gap="1rem" Wrap="FlexWrap.Wrap" JustifyContent="JustifyContent.End" class="pt-1">
                <p class="p-0 m-0 text-end fw-lighter text-muted">
                    Última actualización: @GridTimer.LastUpdate.ToString(SharedLocalizer["datetime:format"])
                </p>
            </RadzenStack>
    </RadzenColumn>
    </RadzenRow>
    <RadzenRow class="mb-2">
        <MinimumQuantityNotifications PendingStatusOrderId="@pendingStatusOrder.StatusDocumentTypeId" />
    </RadzenRow>
    <RadzenRow class="mb-2">
        <OutOfStockNotifications PendingStatusOrderId="@pendingStatusOrder.StatusDocumentTypeId" />
    </RadzenRow>
    <RadzenRow class="mb-2">
        <UserAlarmNotifications />
    </RadzenRow>
    <RadzenRow class="mb-2">
        <ExpiredReservationNotifications />
    </RadzenRow>
    <RadzenRow class="mb-2">
        <CustomerOrderExpirationNotifications />
    </RadzenRow>
    <RadzenRow class="mb-2">
        <PurchaseOrderExpirationNotifications />
    </RadzenRow>
    <RadzenRow class="mb-2">
        <PurchaseOrderTransitAlarmNotifications />
    </RadzenRow>
}
